

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Extend and develop &mdash; VVV 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="VVV 0.1 documentation" href="index.html" />
    <link rel="prev" title="Community" href="community.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="community.html" title="Community"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">VVV 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Extend and develop</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#setting-up-development-environment">Setting up development environment</a></li>
<li><a class="reference internal" href="#creating-plug-in">Creating plug-in</a><ul>
<li><a class="reference internal" href="#other">Other</a></li>
</ul>
</li>
<li><a class="reference internal" href="#running-tests">Running tests</a></li>
<li><a class="reference internal" href="#validating-code">Validating code</a></li>
<li><a class="reference internal" href="#releasing-egg">Releasing egg</a></li>
<li><a class="reference internal" href="#publishing-docs">Publishing docs</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="community.html"
                        title="previous chapter">Community</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/develop.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="extend-and-develop">
<h1>Extend and develop<a class="headerlink" href="#extend-and-develop" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#introduction" id="id1">Introduction</a></li>
<li><a class="reference internal" href="#setting-up-development-environment" id="id2">Setting up development environment</a></li>
<li><a class="reference internal" href="#creating-plug-in" id="id3">Creating plug-in</a><ul>
<li><a class="reference internal" href="#other" id="id4">Other</a></li>
</ul>
</li>
<li><a class="reference internal" href="#running-tests" id="id5">Running tests</a></li>
<li><a class="reference internal" href="#validating-code" id="id6">Validating code</a></li>
<li><a class="reference internal" href="#releasing-egg" id="id7">Releasing egg</a></li>
<li><a class="reference internal" href="#publishing-docs" id="id8">Publishing docs</a></li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id1">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>VVV is programmed in Python and targets Python 3.2 and newer versions.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Validators largerly use whatever tools the targe programming language supports and
VVV only provides stub modules which execute shell processes
and then parse output. Not much Python knowledge is needed in order to expand VVV.</p>
</div>
<p>VVV accepts plug-ins as Python eggs. Yo&#8217;ll declare plug-in integration points in your egg setup.py <tt class="docutils literal"><span class="pre">entry_points</span></tt> section.
Then just install your eggs in the same virtualenv with VVV and it will automatically pick them up.</p>
</div>
<div class="section" id="setting-up-development-environment">
<h2><a class="toc-backref" href="#id2">Setting up development environment</a><a class="headerlink" href="#setting-up-development-environment" title="Permalink to this headline">¶</a></h2>
<p>Python 3.2 needed + setuptools + virtualenv needed, as instructed in Installation section.</p>
<p>Setting up VVV in development mode:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">source venv/bin/activate</span>
<span class="go">python setup.py develop</span>
</pre></div>
</div>
<p>Running VVV in development mode:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">source venv/bin/activate</span>
<span class="go">cd ~/repo</span>
<span class="go">vvv</span>
</pre></div>
</div>
</div>
<div class="section" id="creating-plug-in">
<h2><a class="toc-backref" href="#id3">Creating plug-in</a><a class="headerlink" href="#creating-plug-in" title="Permalink to this headline">¶</a></h2>
<p>Each entry point is a Python module with certain format.</p>
<ul class="simple">
<li>Fork on GitHub</li>
<li>Copy existing plug-in .py file as template (<tt class="docutils literal"><span class="pre">jshint.py</span></tt> preferred)</li>
<li>Add new entry points in setup.py</li>
<li>Run <tt class="docutils literal"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">develop</span></tt> to activate the entry points</li>
<li>Add test cases in <tt class="docutils literal"><span class="pre">tests/validators</span></tt></li>
<li>See tests pass</li>
<li>See VVV code itself passes the validation</li>
<li>Send merge request</li>
</ul>
<div class="section" id="other">
<h3><a class="toc-backref" href="#id4">Other</a><a class="headerlink" href="#other" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="http://sphinx.pocoo.org/domains.html#signatures">Sphinx function signatures</a></li>
</ul>
</div>
</div>
<div class="section" id="running-tests">
<h2><a class="toc-backref" href="#id5">Running tests</a><a class="headerlink" href="#running-tests" title="Permalink to this headline">¶</a></h2>
<p>To run tests:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">source venv/bin/activate</span>
<span class="go">cd tests</span>
<span class="go">python -m unittest discover</span>
</pre></div>
</div>
<p>To debug further runs without triggering reinstall &amp; download:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">VVV_TEST_SKIP_REINSTALL=true VVV_TEST_OUTPUT=verbose python -m unittest discover</span>
</pre></div>
</div>
<p>To run a single test / test group you can use a filter which uses substring match against test names:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">VVV_TEST_SKIP_REINSTALL=true VVV_TEST_FILTER=css python -m unittest discover</span>
</pre></div>
</div>
<p>... or ...:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">VVV_TEST_SKIP_REINSTALL=true VVV_TEST_OUTPUT=verbose VVV_TEST_FILTER=css_simple_pass python -m unittest discover</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All slashes and dashes are converted to underscores in test case names.</p>
</div>
<p>TODO: Use HTTP proxy (polipo) to speed up tests by caching downloads locally.</p>
</div>
<div class="section" id="validating-code">
<h2><a class="toc-backref" href="#id6">Validating code</a><a class="headerlink" href="#validating-code" title="Permalink to this headline">¶</a></h2>
<p>Your can self-validate the vvv codebase:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">source venv/bin/activate</span>

<span class="gp">#</span> Make sure you have docutils installed, as it is referred by some files
<span class="go">easy_install docutils</span>

<span class="go">vvv .</span>
</pre></div>
</div>
</div>
<div class="section" id="releasing-egg">
<h2><a class="toc-backref" href="#id7">Releasing egg</a><a class="headerlink" href="#releasing-egg" title="Permalink to this headline">¶</a></h2>
<p>Use <a class="reference external" href="http://pypi.python.org/pypi/jarn.mkrelease">jarn.mkrelease</a>:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">source PYTHON2-VENV/bin/activate</span>
<span class="go">easy_install mkrelease</span>
<span class="go">mkrelease -C -T -d pypi .</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For mkrelease you need to Python 2.x virtualenv.</p>
</div>
<p>mkrelease bug:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">  File &quot;/Users/moo/code/vvv/venv/lib/python3.2/site-packages/jarn.mkrelease-3.5-py3.2.egg/jarn/mkrelease/mkrelease.py&quot;, line 237</span>
<span class="go">    except getopt.GetoptError, e:</span>
<span class="go">                             ^</span>
<span class="go">SyntaxError: invalid syntax</span>
</pre></div>
</div>
</div>
<div class="section" id="publishing-docs">
<h2><a class="toc-backref" href="#id8">Publishing docs</a><a class="headerlink" href="#publishing-docs" title="Permalink to this headline">¶</a></h2>
<p>rtfd.org does not seem to support Python 3 auto import modules.</p>
<p>To publish docs on GitHub:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">source venv/bin/activate</span>
<span class="go">easy_install Sphinx</span>
<span class="go">sh scripts/publish-docs.sh</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="community.html" title="Community"
             >previous</a> |</li>
        <li><a href="index.html">VVV 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Mikko Ohtamaa.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>